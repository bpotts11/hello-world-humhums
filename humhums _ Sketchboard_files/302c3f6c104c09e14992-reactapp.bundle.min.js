(window.webpackJsonp=window.webpackJsonp||[]).push([[14],[,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStore=function(){return l},t.registerReducer=function(e){return c=Object.assign(Object.assign({},c),e),l.replaceReducer((0,a.combineReducers)(c)),l},t.observeStore=function(t,n){var r=void 0;function e(){var e=t(l.getState());e!==r&&n(r=e)}var a=l.subscribe(e);return e(),a};var r,a=n(20),o=n(52),i=(r=o)&&r.__esModule?r:{default:r},u=n(29);var s=(0,n(53).composeWithDevTools)((0,a.applyMiddleware)(i.default))(a.createStore),c=Object.assign({},u.staticReducers),l=s((0,a.combineReducers)(c))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PUBLISH_BOARD_NAMESPACE_KEY="PUBLISH_BOARD_NAMESPACE",t.MOVE_BOARD_NAMESPACE_KEY="MOVE_BOARD_NAMESPACE",t.BOARD_USERS_NAMESPACE_KEY="BOARD_USERS_NAMESPACE",t.CURRENT_USER_NAMESPACE_KEY="CURRENT_USER_NAMESPACE_KEY",t.INFO_NAMESPACE_KEY="INFO_NAMESPACE_KEY",t.BLANK_NAMESPACE_KEY="BLANK_NAMESPACE"},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,i,u,s=t.CurrentUserActionTypes=void 0;(o=s||(t.CurrentUserActionTypes=s={})).CurrentUserSave="CURRENT_USER/SAVE",o.CurrentUserUpdateUserActivity="CURRENT_USER/UPDATE/ACTIVITY",o.CurrentBoardSave="CURRENT_BOARD/SAVE",o.CurrentBoardUpdateBoardName="CURRENT_BOARD/UPDATE/NAME",o.UpdateShowHideBoardUsersSuccess="UPDATE_SHOW_HIDE_BOARD_USERS/SUCCESS",(u=i=i||{})[u.free=0]="free",u[u.trial=1]="trial",u[u.business=2]="business";t.CurrentUser=(r(c,[{key:"isTrial",value:function(){return this.defaultAccountType===i.trial}},{key:"isDefaultAccountExpired",value:function(){return this.defaultAccountExpired}},{key:"updateDefaultAccountType",value:function(e){this.defaultAccountType=e}},{key:"isLoggedIn",value:function(){return this.loggedIn}},{key:"isShowBoardUsers",value:function(){return!(4==(4&this.properties))}},{key:"isLibraryManualShowHide",value:function(){return 8==(8&this.properties)}},{key:"isAccountRoleReadOnly",value:function(){return 2===this.accountRole}},{key:"isAccountRoleAdminOrPrimaryOwner",value:function(){return 1===this.accountRole||3===this.accountRole}},{key:"isAnonymous",value:function(){return void 0===this.email}},{key:"isGoogleUser",value:function(){return 2==this.authType}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.currentTeam={team_id:null,team_name:null,notExpired:!1,client:!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.currentBoard=t.select=t.closeOnEsc=t.canIDeleteBoard=t.whenScrolled=t.isOutsideElement=t.hideClickedOutside=t.showShareWithAccountUsers=t.showUnshareWithAccountUsers=t.isLoggedInAndProAndNotSharedWithPwBoard=t.isLoggedInAndProAndSharedWithPwBoard=t.isLoggedIn=t.isVersion=t.currentBoardFullId=t.Track=t.isMac=t.shortcut=t.capitalLetters=t.copyTextSimple=t.currentBoardLink=t.addTooltip=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(24),i=n(17),u=n(4);t.addTooltip=function(e,t){var n=jQuery(e);n.tooltip(t),n.on("mousedown",function(){n.tooltip("hide")})},t.currentBoardLink=function(){return location.href.split("#")[0]},t.copyTextSimple=function(t,n,r){if(!t)return function(){};var e=new ClipboardJS(t);return e.on("error",function(e){Hammer(t).on("tap",function(){window.prompt("1. Copy to clipboard: Cmd/Ctrl+C, Enter.\n2. Send link e.g. by email.",n.clipboardText)})}),e.on("success",function(e){r(o.NotifyService.info(n.copiedHint))}),function(){e.destroy()}},t.capitalLetters=function(e,t){var n="";return e&&0<e.length&&1==(n=_.map(_.first(e.split(" "),t),function(e){return e.substring(0,1).toUpperCase()}).join("")).length&&2<=e.length&&(n+=e[1]),n},t.shortcut=function(e){return c()?"âŒ˜"+e:"Ctrl+"+e};var s=0<=navigator.platform.toUpperCase().indexOf("MAC"),c=t.isMac=function(){return s},l=t.Track=(r(d,null,[{key:"fireEvent",value:function(e,t,n){"undefined"!=typeof ga?(ga("send","event",t,e,n),ga("cdTracker.send","event",t,e,n)):console.log("Track:",e,"category",t,"label",n)}}]),d);function d(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d)}l.TrackUpgradeUserMessageCategory="um",l.TrackUpgradeInfoCategory="info",l.TrackUpgradeLabel="upgrade";var f=t.currentBoardFullId=function(){return location.pathname.substring(1)},p=(t.isVersion=function(){return 2==f().split("-").length},t.isLoggedIn=function(){return"undefined"!=typeof initialState&&currentUser().isLoggedIn()}),m=(t.isLoggedInAndProAndSharedWithPwBoard=function(){return p()&&g().isPro()&&g().isPasswordProtected()},t.isLoggedInAndProAndNotSharedWithPwBoard=function(){return p()&&g().isPro()&&!g().isPasswordProtected()},t.showUnshareWithAccountUsers=function(){return g().iAmTheOwner()&&g().isAccountVisibility()},t.showShareWithAccountUsers=function(){return g().iAmTheOwner()&&g().isPrivate()},t.hideClickedOutside=function(t,n){var r=Hammer2(document,{tapAlways:!0});function a(e){location.hash==="#"+n&&m(t,e.target)&&(location.hash="/",r.off("tap",a))}return r.on("tap",a),function(){r.off("tap",a)}},t.isOutsideElement=function(e,t){var n=jQuery(e);return!n.is(t)&&0===n.has(t).length}),g=(t.whenScrolled=function(e,t){function n(){e.scrollTop+e.offsetHeight>=e.scrollHeight&&t()}var r=jQuery(e);return r.bind("scroll",n),function(){r.unbind("scroll",n)}},t.canIDeleteBoard=function(e,t){return!e.isAccountRoleReadOnly()&&(!!t.iAmTheOwner()||!!e.isAccountRoleAdminOrPrimaryOwner())},t.closeOnEsc=function(e){var n=jQuery(e);$("body").on("keyup",function(e){if(27===e.keyCode){var t=n.find("input");t&&t.blur(),n.hide()}})},t.select=function(e){var t=jQuery(e);setTimeout(function(){t.select()})},t.currentBoard=function(){return(0,i.getCurrentUserState)((0,u.getStore)().getState()).currentUserState.currentBoard})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.InfoActionTypes=void 0;(r||(t.InfoActionTypes=r={})).SetInfoText="INFO/SET_TEXT"},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStateAtNamespaceKey=function(e,t){var n=e[t];if(n)return n;throw new Error("Attempted to access state for an unregistered namespace at key "+t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateCurrentTeam=function(){window.location.href="/settings/"+currentUser().currentTeam.team_id+"/pricing"},t.upgradeCurrentTeamLink=function(){return"/settings/"+currentUser().currentTeam.team_id+"/pricing"},t.upgradeTeamToOrgLink=function(){return currentUser().currentTeam.notExpired?"/orgs/upgrade/team/"+currentUser().currentTeam.team_id:currentUser().currentTeam.org?"/orgs/"+currentUser().currentTeam.org.org_id+"/subscribe/org-standard2-usd/month":"/settings/"+currentUser().currentTeam.team_id+"/upgrade/org-standard2-usd/month"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.isiOSBrowser=d,t.linkOutside=function(e){return"undefined"!=typeof _config&&!e.startsWith(_config.sketchboardURL)},t.addLinkListener=function(e){d()?e.addEventListener("touchstart",b,!1):e.addEventListener("pointerdown",b,!1)};var o=n(0),i=s(o),u=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}var c=i.default.lazy(function(){return Promise.all([n.e(1),n.e(8)]).then(n.t.bind(null,49,7))}),l=null;function d(){return l=l||navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/)}var f=null;(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(p,i.default.Component),r(p,[{key:"componentDidCatch",value:function(e,t){console.log(e,"\n",t)}},{key:"render",value:function(){return this.state.hasError?i.default.createElement("h1",null,"Something went wrong."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]);function p(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,e));return t.state={hasError:!1},t}var m=null;function g(e){var t=e.target.parentNode.getAttributeNS("http://www.w3.org/1999/xlink","href"),n=uiutils.getPosition(jQuery(e.target)),r=function(e){return e instanceof MouseEvent?e:e instanceof PointerEvent?e:e instanceof TouchEvent?e.touches.item(0):void 0}(e);n.left=r.clientX+10,n.top=r.clientY+10,e.preventDefault(),f||(f=document.createElement("div"),document.body.appendChild(f),u.default.render(i.default.createElement("div",null,i.default.createElement(o.Suspense,{fallback:i.default.createElement("div",null,"Loading...")},i.default.createElement(c,{ref:function(e){!function(e,t,n){(m=e).update([t],n)}(e,t,n)}}))),f)),m&&m.update([t],n)}function b(e){try{g(e)}catch(e){console.error("handleiOSLinkOpen:",e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentUserState=void 0;var r=n(14),a=n(5);t.getCurrentUserState=function(e){return(0,r.getStateAtNamespaceKey)(e,a.CURRENT_USER_NAMESPACE_KEY)}},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyService=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(11);t.NotifyService=(r(i,null,[{key:"infoStay",value:function(e){return this._info(e,0)}},{key:"info",value:function(e){return this._info(e,7e3)}},{key:"_info",value:function(t,n){return function(e){e({type:o.InfoActionTypes.SetInfoText,payload:{text:t,timeout:n}}),location.hash="info"}}}]),i);function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=t.GetBoardUsersActionTypes=void 0;(r=a||(t.GetBoardUsersActionTypes=a={})).GetBoardUsersRequest="GET_BOARD_USERS/REQUEST",r.GetBoardUsersSuccess="GET_BOARD_USERS/SUCCESS",r.GetBoardUsersFailure="GET_BOARD_USERS/FAILURE",r.GetBoardUsersClear="GET_BOARD_USERS/CLEAR",r.GetTeamInfoSuccess="GET_TEAM_INFO/SUCCESS",r.UserMessageSeenSuccess="USER_MESSAGE/SEEN/SUCCESS",r.BoardUsersUpdateUser="BOARD_USERS/UPDATE_USER",r.BoardUsersRemoveUser="BOARD_USERS/REMOVE_USER"},,,,function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.staticReducers=void 0;var a=n(5),o=n(30),i=n(31),u=n(32),s=n(33);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.staticReducers=(c(r={},a.BLANK_NAMESPACE_KEY,o.blankReducer),c(r,a.BOARD_USERS_NAMESPACE_KEY,i.boardUsersReducer),c(r,a.CURRENT_USER_NAMESPACE_KEY,u.userStateReducer),c(r,a.INFO_NAMESPACE_KEY,s.infoStateReducer),r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.blankReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boardUsersReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{getBoardUsersState:{users:[]},teamInfo:{free_plan:!1,plan_id_name:null,private_boards_full:!1,max_private_boards:3,seen:!1,fetched:!1}},t=arguments[1];switch(t.type){case u.GetBoardUsersActionTypes.GetBoardUsersRequest:return Object.assign(Object.assign({},e),{getBoardUsersState:Object.assign(Object.assign({},e.getBoardUsersState),{fetching:!0,success:!1,failed:!1})});case u.GetBoardUsersActionTypes.GetBoardUsersFailure:return Object.assign(Object.assign({},e),{getBoardUsersState:Object.assign(Object.assign({},e.getBoardUsersState),{fetching:!1,success:!1,failed:!0,users:[]})});case u.GetBoardUsersActionTypes.GetBoardUsersSuccess:var n=t.payload.users,r=[];_.each(n,function(t){t.username=t.displayName,_.find(e.getBoardUsersState.users,function(e){return e.email==t.email})||r.push(t)});var a=s(e.getBoardUsersState.users.concat(r));return Object.assign(Object.assign({},e),{getBoardUsersState:Object.assign(Object.assign({},e.getBoardUsersState),{fetching:!1,success:!0,failed:!1,users:a})});case u.GetBoardUsersActionTypes.GetBoardUsersClear:return Object.assign(Object.assign({},e),{getBoardUsersState:Object.assign(Object.assign({},e.getBoardUsersState),{fetching:!1,success:!1,failed:!1,users:[]})});case u.GetBoardUsersActionTypes.GetTeamInfoSuccess:return Object.assign(Object.assign({},e),{teamInfo:t.payload.teamInfo});case u.GetBoardUsersActionTypes.UserMessageSeenSuccess:return Object.assign(Object.assign({},e),{teamInfo:Object.assign(Object.assign({},e.teamInfo),{seen:!0})});case u.GetBoardUsersActionTypes.BoardUsersUpdateUser:var o=_.filter(e.getBoardUsersState.users,function(e){return e.email!=t.payload.user.email});return o=s(o=o.concat([t.payload.user])),Object.assign(Object.assign({},e),{getBoardUsersState:Object.assign(Object.assign({},e.getBoardUsersState),{users:o})});case u.GetBoardUsersActionTypes.BoardUsersRemoveUser:var i=e.getBoardUsersState.users.filter(function(e){return e.email!=t.payload.user.email});return Object.assign(Object.assign({},e),{getBoardUsersState:Object.assign(Object.assign({},e.getBoardUsersState),{users:i})});default:return e}};var u=n(25);function s(e){return _.sortBy(e,function(e){return e.email})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userStateReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{currentUserState:{currentUser:new r.CurrentUser,currentBoard:null}},t=arguments[1];switch(t.type){case r.CurrentUserActionTypes.CurrentUserSave:return Object.assign(Object.assign({},e),{currentUserState:Object.assign(Object.assign({},e.currentUserState),{currentUser:t.payload.currentUser})});case r.CurrentUserActionTypes.CurrentUserUpdateUserActivity:return Object.assign(Object.assign({},e),{currentUserState:Object.assign(Object.assign({},e.currentUserState),{currentUser:Object.assign(Object.assign({},e.currentUserState.currentUser),{userLastActivity:t.payload.userLastActivity})})});case r.CurrentUserActionTypes.CurrentBoardSave:return Object.assign(Object.assign({},e),{currentUserState:Object.assign(Object.assign({},e.currentUserState),{currentBoard:t.payload.currentBoard})});case r.CurrentUserActionTypes.CurrentBoardUpdateBoardName:return Object.assign(Object.assign({},e),{currentUserState:Object.assign(Object.assign({},e.currentUserState),{currentBoard:Object.assign(Object.assign({},e.currentUserState.currentBoard),{name:t.payload.boardName})})});case r.CurrentUserActionTypes.UpdateShowHideBoardUsersSuccess:return Object.assign(Object.assign({},e),{currentUserState:Object.assign(Object.assign({},e.currentUserState),{currentUser:Object.assign(Object.assign({},e.currentUserState.currentUser),{properties:function(){switch(t.payload.showBoardUsers){case!0:return e.currentUserState.currentUser.properties&~a;default:return e.currentUserState.currentUser.properties|a}}()})})});default:return e}};var r=n(9),a=4},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.infoStateReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{infoState:{text:null,timeout:7e3}},t=arguments[1];switch(t.type){case r.InfoActionTypes.SetInfoText:return Object.assign(Object.assign({},e),{infoState:{text:t.payload.text,timeout:t.payload.timeout}});default:return e}};var r=n(11)},function(e,t,n){"use strict";function r(e,t){return e.sketchboardAvatar?function(e,t){var n=e.split("/");if(1<n.length){var r=n[n.length-1].match(/d\.(\S+)/);if(r){var a=r[1];return n[n.length-1]=t+"."+a,n.join("/")}}return""}(e.avatarUrl,t):e.avatarUrl+"?d=mm&s="+t}Object.defineProperty(t,"__esModule",{value:!0}),t.makeUrl=r,window.makeUrl=r,window.tsCurrentSketchMode=function(){return gwtIsSketchMode()?0:1}},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.TeamAPI=(r(o,null,[{key:"getTeams",value:function(){return new Promise(function(t,n){getAccountService().teams().then(function(e){t(e)}).catch(function(e){n(e)})})}},{key:"getTeamInfo",value:function(e){return new Promise(function(t,n){getAccountService().getTeamInfo({team_id:e}).then(function(e){switch(e.ok){case 0:t(e.team_info);break;default:console.error("TeamAPI.getTeamInfo",e)}}).catch(function(e){console.error("TeamAPI.getTeamInfo",e),n(e)})})}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReqNewBoard=f;var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},i=n(17),u=n(4),s=n(47),c=n(24),l=n(15),d=n(10);function f(){var t=(0,u.getStore)().dispatch,n=(0,i.getCurrentUserState)((0,u.getStore)().getState()).currentUserState.currentUser.currentTeam.team_id;s.TeamAPI.getTeamInfo(n).then(function(e){e.private_boards_full?t(c.NotifyService.infoStay(o.default.createElement("div",null,"Your team has reached the maximum number of boards for the free plan. ",o.default.createElement("br",null),o.default.createElement("a",{href:(0,l.upgradeCurrentTeamLink)(),style:{color:"#fff",textDecoration:"underline"},onClick:function(){d.Track.fireEvent("upgrade-new-board-max-nbr-boards",d.Track.TrackUpgradeInfoCategory,d.Track.TrackUpgradeLabel)}},"Upgrade now")," for unlimited boards."))):getBoardService().newBoard({team_id:n}).then(function(e){e&&(location.href="/"+e)})}).catch(function(e){})}window.ReqNewBoard=f},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopLeftMenu=t.UserMessageType=void 0;var f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},p=n(0),m=r(p),g=n(13),b=n(5),h=n(59),u=n(10),s=n(34),c=r(n(27)),v=n(79);n(80);var l=n(48),o=n(61);function r(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.getBoardUsersState;return m.default.createElement("span",null,m.default.createElement("ul",{className:"ul-none ul-horizontal teammates"},t.users.map(function(e,t){return m.default.createElement(i,{key:t,au:e,i:t})})))}function y(e){var t=(0,g.useDispatch)(),n=(0,g.useSelector)(function(e){return e[b.BOARD_USERS_NAMESPACE_KEY]}).getBoardUsersState,r=(0,g.useSelector)(function(e){return e[b.CURRENT_USER_NAMESPACE_KEY]}).currentUserState;if((0,p.useEffect)(function(){r.currentBoard&&t((0,h.ReqGetBoardUsers)())},[r.currentBoard]),(0,p.useEffect)(function(){return globalStreams.reloadBoardUsersStream.onValue(function(){t((0,h.ReqGetBoardUsers)())})},[]),!r.currentUser||!r.currentBoard)return m.default.createElement("div",null);if(!r.currentUser.isLoggedIn())return m.default.createElement("div",null);function a(){if(r.currentBoard.isPrivate())return"Private Personal Board";if(r.currentBoard.isPublic())return"Public Board, world visible";var e="Show board users";return r.currentUser.isShowBoardUsers()&&(e="Hide users"),e}var o=(0,c.default)({"board-name-team-board":0<n.users.length}),i=(0,c.default)({"fa fa-angle-double-left button-like":r.currentUser.isShowBoardUsers(),"fa fa-angle-double-right button-like":!r.currentUser.isShowBoardUsers()});return m.default.createElement("div",{className:o},m.default.createElement("a",{onClick:function(){return window.location.href="#/profile"},className:"current-user",style:{marginRight:"3px"}},m.default.createElement("img",{src:(0,s.makeUrl)({avatarUrl:r.currentUser.avatarUrl?r.currentUser.avatarUrl:"",sketchboardAvatar:void 0===r.currentUser.sketchboardAvatar},50),width:"23",height:"23",ref:function(e){return(0,u.addTooltip)(e,{title:r.currentUser.email,placement:"bottom",container:"body",html:!1})}})),m.default.createElement("a",{href:"#/switchteam",className:"current-team pure-button"},m.default.createElement("div",{"data-original-title":"Team "+r.currentUser.currentTeam.team_name+" | "+(0,u.shortcut)("K"),className:"align-center",ref:function(e){(0,u.addTooltip)(e,{title:"Team "+r.currentUser.currentTeam.team_name+" | "+(0,u.shortcut)("K"),container:"body",placement:"bottom"})}},(0,u.capitalLetters)(r.currentUser.currentTeam.team_name,2))),m.default.createElement("a",{className:"current-team pure-button pure-button-white",onClick:function(){(0,l.ReqNewBoard)()}},m.default.createElement("div",{className:"align-center",ref:function(e){(0,u.addTooltip)(e,{title:"New board | Alt+N",container:"body",placement:"bottom"})}},m.default.createElement("svg",{className:"sprite-hamburger-menu"},m.default.createElement("use",{xlinkHref:"#menu-icon--new-file"})))),m.default.createElement("span",{className:"board-name-sub",onClick:function(){return window.location.href="#/boardname"},"data-original-title":"Rename the board",ref:function(e){return(0,u.addTooltip)(e,{title:"Rename the board",placement:"bottom"})}},r.currentBoard.name),r.currentBoard.isPrivate()&&m.default.createElement("span",{"data-original-title":a(),ref:function(e){return(0,u.addTooltip)(e,{title:a(),placement:"bottom"})}},m.default.createElement("a",{href:"#/boardname"},m.default.createElement("i",{className:"fa fa-user ico-team-board"}))),r.currentBoard.isPublic()&&m.default.createElement("span",{"data-original-title":a(),ref:function(e){return(0,u.addTooltip)(e,{title:a(),placement:"bottom"})}},m.default.createElement("a",{href:"#/boardname"},m.default.createElement("i",{className:"fa fa-cloud ico-team-board"}))),r.currentBoard.isAccountVisibility()&&m.default.createElement("span",null,m.default.createElement("a",{"data-original-title":"Team Board",ref:function(e){return(0,u.addTooltip)(e,{title:"Team Board",placement:"bottom"})},onClick:function(){return window.location.href="#/boardname"}},m.default.createElement("i",{className:"fa fa-users ico-team-board"})),0<n.users.length&&m.default.createElement("a",{"data-original-title":a(),ref:function(e){return(0,u.addTooltip)(e,{title:a(),placement:"bottom"})},onClick:function(){t((0,h.ReqShowHideBoardUsers)(!r.currentUser.isShowBoardUsers()))}},m.default.createElement("i",{className:i,style:{padding:"0 5px",margin:"0 3px 0 3px"}})),r.currentUser.isShowBoardUsers()&&m.default.createElement(d,{getBoardUsersState:n})))}var a,S=m.default.lazy(function(){return n.e(12).then(n.t.bind(null,100,7))}),i=function(e){var t=e.i,n=e.au,r=(0,p.useRef)(),a=(0,c.default)({highlight:n.online});return m.default.createElement(m.default.Fragment,null,0==t&&m.default.createElement("li",{key:"add-teammate",ref:r},m.default.createElement("a",{href:"#/account",className:"add-teammate"},m.default.createElement("i",{className:"fa fa-user-plus ico-team-board"})),m.default.createElement(o.Tooltip,{parent:r,children:m.default.createElement(m.default.Fragment,null,"Add teammate"),placement:"bottom"})),m.default.createElement("li",{key:t},m.default.createElement("img",{src:(0,s.makeUrl)(n,50),"data-original-title":n.username,className:a,ref:function(e){return(0,u.addTooltip)(e,{title:n.username,placement:"bottom"})},width:"25",height:"25"})))},E=t.UserMessageType=void 0;(a=E||(t.UserMessageType=E={}))[a.NoMessage=0]="NoMessage",a[a.PrivateBoardsFull=1]="PrivateBoardsFull",a[a.ExportLoseless=2]="ExportLoseless",a[a.UploadImage=3]="UploadImage",a[a.PasswordSharing=4]="PasswordSharing";t.TopLeftMenu=function(e){var t=(0,p.useState)({showType:E.NoMessage}),n=f(t,2),r=n[0],a=n[1],o=(0,p.useState)(0),i=f(o,2),u=i[0],s=i[1],c=(0,g.useSelector)(function(e){return e[b.BOARD_USERS_NAMESPACE_KEY]}).teamInfo,l=(0,g.useDispatch)();(0,p.useEffect)(function(){globalStreams.userMessagePropsStream.push(u)},[u]),(0,p.useEffect)(function(){setTimeout(function(){l((0,h.ReqGetTeamFreePlanStatus)())},5e3)},[]),(0,p.useEffect)(function(){_.once(function(){globalStreams.userMessageEventStream.onValue(function(e){!c.free_plan&&e!=E.PasswordSharing||a({showType:e})})})()},[c]),(0,p.useEffect)(function(){a({showType:!c.seen&&c.free_plan&&c.private_boards_full?E.PrivateBoardsFull:E.NoMessage})},[c]),(0,p.useEffect)(function(){0<r.showType?s(35):s(0)},[r.showType]);var d={top:u};return m.default.createElement("div",{className:"board-name",style:d},0<r.showType&&m.default.createElement(p.Suspense,{fallback:m.default.createElement("div",null)},m.default.createElement(S,{onHide:function(){a(Object.assign(Object.assign({},r),{showType:E.NoMessage})),l((0,h.ReqUserMessageSeen)())},height:u,messageType:r.showType})),m.default.createElement("div",{className:"top-menu-container"},m.default.createElement(y,null),m.default.createElement(v.DocumentStateComponent,null)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.API=(r(o,null,[{key:"whenReady",value:function(t){var n=0,r=10;!function e(){"undefined"!=typeof exportBackend&&"undefined"!=typeof backend?t():n<r?(n++,setTimeout(function(){e()},250)):console.error("API not ready")}()}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReqShowHideBoardUsers=function(t){return function(e){e({type:a.CurrentUserActionTypes.UpdateShowHideBoardUsersSuccess,payload:{showBoardUsers:t}}),r.BoardUsersAPI.updateShowHidBoardUsers(t).then(function(e){})}},t.ReqGetBoardUsers=function(){return function(t){t({type:i.GetBoardUsersActionTypes.GetBoardUsersRequest}),r.BoardUsersAPI.getAccountUsersForBoard().then(function(e){t({type:i.GetBoardUsersActionTypes.GetBoardUsersSuccess,payload:{users:e.users}})}).catch(function(e){console.error("ReqGetBoardUsers",e),t({type:i.GetBoardUsersActionTypes.GetBoardUsersFailure})})}},t.ReqGetTeamFreePlanStatus=function(){return function(t){var e=(0,c.getCurrentUserState)((0,u.getStore)().getState()),n=(0,s.getBoardUsersState)((0,u.getStore)().getState()).teamInfo;e.currentUserState.currentUser.currentTeam.team_id&&(n.fetched||o.TeamAPI.getTeamInfo(e.currentUserState.currentUser.currentTeam.team_id).then(function(e){t({type:i.GetBoardUsersActionTypes.GetTeamInfoSuccess,payload:{teamInfo:e}})}))}},t.ReqUserMessageSeen=function(){return function(t){l.UserAPI.userMessageSeen().then(function(e){t({type:i.GetBoardUsersActionTypes.UserMessageSeenSuccess})})}};var r=n(77),i=n(25),u=n(4),s=n(60),c=n(17),a=n(9),o=n(47),l=n(78);var d="https://dly2br18d18gh.cloudfront.net/img/user_icon_100x100.png",f=8e3,p=3e4;function m(e){!function(e){var n=(0,s.getBoardUsersState)((0,u.getStore)().getState());_.each(e,function(t){var e=_.find(n.getBoardUsersState.users,function(e){return t.email==e.email});e?e.username=t.username:function(e){e.avatarUrl&&""!=e.avatarUrl||(e.avatarUrl=d);var t=(0,u.getStore)().dispatch;e.email&&""!=e.email&&"anonymous"!=e.email&&t({type:i.GetBoardUsersActionTypes.BoardUsersUpdateUser,payload:{user:e}})}(Object.assign({},t))})}(e);var t=(0,s.getBoardUsersState)((0,u.getStore)().getState()),n=(0,u.getStore)().dispatch;_.chain(t.getBoardUsersState.users).filter(function(t){return null!=_.find(e,function(e){return t.email===e.email})}).each(function(e){var t=Object.assign(Object.assign({},e),{online:!0,expires:(new Date).getTime()+p});n({type:i.GetBoardUsersActionTypes.BoardUsersUpdateUser,payload:{user:t}})})}var g=null;globalStreams.websocketMouseStream.onValue(function(e){var t=(new Date).getTime();g&&t<g.when+4e3||(g={when:t,email:e.email},m([e]))}),globalStreams.usersStream.onValue(function(e){m(e)});!function e(){setTimeout(function(){!function(){var r=(new Date).getTime(),e=(0,s.getBoardUsersState)((0,u.getStore)().getState()),a=(0,c.getCurrentUserState)((0,u.getStore)().getState()),o=(0,u.getStore)().dispatch;_.each(e.getBoardUsersState.users,function(e){var t=!1,n=Object.assign({},e);n.online&&r>n.expires&&n.email!=currentUser().email?t=!(n.online=!1):n.email==currentUser().email&&(n.online=r<=a.currentUserState.currentUser.userLastActivity+p,t=!0),t&&o({type:i.GetBoardUsersActionTypes.BoardUsersUpdateUser,payload:{user:n}})})}(),function(){for(var e=(0,s.getBoardUsersState)((0,u.getStore)().getState()),t=e.getBoardUsersState.users.length-1;0<=t;--t){var n=e.getBoardUsersState.users[t];n.online||"guest"!=n.username||(0,(0,u.getStore)().dispatch)({type:i.GetBoardUsersActionTypes.BoardUsersRemoveUser,payload:{user:n}})}}(),e()},f)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBoardUsersState=void 0;var r=n(14),a=n(5);t.getBoardUsersState=function(e){return(0,r.getStateAtNamespaceKey)(e,a.BOARD_USERS_NAMESPACE_KEY)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipImpl=t.Tooltip=void 0;var k=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},P=n(0),x=r(P),a=r(n(8)),j=r(n(27));function r(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(82);t.Tooltip=function(e){var t=e.children,n=e.parent,r=e.placement;return a.default.createPortal(x.default.createElement(o,{children:t,parent:n,placement:r}),document.body)};var o=t.TooltipImpl=function(e){var t,n=e.children,a=e.parent,o=e.placement,r=(0,P.useState)(0),i=k(r,2),u=i[0],s=i[1],c=(0,P.useState)(0),l=k(c,2),d=l[0],f=l[1],p=(0,P.useState)(!1),m=k(p,2),g=m[0],b=m[1],h=(0,P.useState)("hidden"),v=k(h,2),y=v[0],S=v[1];(0,P.useEffect)(function(){function e(){b(!0)}function t(){b(!1)}var n=PointerEvent?"pointerover":"mouseover",r=PointerEvent?"pointerout":"mouseout";return a.current.addEventListener(n,e),a.current.addEventListener(r,t),function(){a.current&&(a.current.removeEventListener(n,e),a.current.removeEventListener(r,t))}},[a.current]);var E=(0,P.useState)(!1),U=k(E,2),_=U[0],w=U[1];(0,P.useEffect)(function(){setTimeout(function(){w(g)},100)},[g]);var A=(0,P.useState)(null),T=k(A,2),B=T[0],O=T[1];return(0,P.useEffect)(function(){if(B){var e=B.offsetWidth,t=B.offsetHeight,n=a.current.getBoundingClientRect(),r=null;switch(o){case"bottom":r={top:n.top+n.height,left:n.left+n.width/2-e/2};break;case"top":r={top:n.top-t,left:n.left+n.width/2-e/2};break;case"left":r={top:n.top+n.height/2-t/2,left:n.left-e};break;case"right":r={top:n.top+n.height/2-t/2,left:n.left+n.width}}f(r.top),s(r.left),S("visible")}},[B]),g?x.default.createElement("div",{className:(0,j.default)((t={"sb-tooltip":!0,fade:_},R(t,o,!0),R(t,"in",g),t)),style:{left:u,top:d,display:"block",visibility:y},ref:function(e){return O(e)}},x.default.createElement("div",{className:"sb-tooltip-arrow"}),x.default.createElement("div",{className:"tooltip-inner"},n)):x.default.createElement(x.default.Fragment,null)}},function(e,t,n){"use strict";var r=c(n(0)),a=c(n(8)),o=n(4),i=n(68);n(72);var u=n(73),s=n(84);function c(e){return e&&e.__esModule?e:{default:e}}n(91);var l=(0,o.getStore)();"undefined"!=typeof _initialUser&&_initialUser.email&&!_initialUser.tutorialDone&&(location.pathname="/service/tutorial");var d=document.getElementById("vueapp");d&&a.default.render((0,s.getReactApp)(l),d);var f=document.getElementById("link-layer");f&&a.default.render(r.default.createElement(i.ShapeLinks,null),f);var p=document.getElementById("react-dynamic");p&&a.default.render(r.default.createElement(u.ReactDynamic,{store:l}),p)},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeLinks=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,i=n(0),u=(o=i)&&o.__esModule?o:{default:o};n(69);var s=n(16);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=(d(p,u.default.Component),r(p,[{key:"mousedown",value:function(e){e.preventDefault()}},{key:"render",value:function(){if(this.props.shape.links.length<=0)return u.default.createElement("div",null);var e=gwtGetShapesDimension([this.props.shape.clientId]),t=e.left+e.width-5,n=e.top-25,r=this.props.shape.links[0].url,a=(0,s.linkOutside)(r),o=u.default.createElement("a",{href:r,tabIndex:-1,onMouseDown:this.mousedown.bind(this)},u.default.createElement("div",{className:"link-shape button-hover"},u.default.createElement("svg",{className:"sprite-hamburger-menu"},u.default.createElement("use",{xlinkHref:"#menu-icon--anchor"}))));return a&&(o=u.default.cloneElement(o,{target:"_blank",rel:"noopener noreferrer"})),u.default.createElement("div",{className:"link-shape-wrap",style:{left:t+"px",top:n+"px"}},o)}}]),p);function p(){return c(this,p),l(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}t.ShapeLinks=(d(m,u.default.Component),r(m,[{key:"inArray",value:function(t,e){return 0<e.filter(function(e){return e==t}).length}},{key:"hideSelectedComments",value:function(t){var n=this;t&&this.setState(function(e){return{linkShapes:n.state.linkShapes.filter(function(e){return!n.inArray(e.clientId,t)})}})}},{key:"hideComments",value:function(){this.setState({linkShapes:[]})}},{key:"updateLinksPosition",value:function(){this.debounceUpdate()}},{key:"doUpdate",value:function(){var e=gwtGetJsItems().filter(function(e){return!!(e.links&&0<e.links.length&&e.links[0].url&&0<e.links[0].url.length)});this.setState({linkShapes:e})}},{key:"render",value:function(){return u.default.createElement("div",null,this.state.linkShapes.map(function(e,t){return u.default.createElement(f,{key:t,shape:e})}))}}]),m);function m(e){c(this,m);var t=l(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return t.state={linkShapes:[]},t.debounceUpdate=_.debounce(t.doUpdate,300),globalStreams.boardLoadedWrapStream.onValue(function(){t.updateLinksPosition()}),globalStreams.shapeLinkStream.onValue(function(e){t.updateLinksPosition()}),globalStreams.dataItemDeleteStream.onValue(function(){t.updateLinksPosition()}),globalStreams.deleteShapeStream.onValue(function(){t.updateLinksPosition()}),globalStreams.shapeResizeStream.onValue(function(){t.updateLinksPosition()}),globalStreams.undoStackStream.onValue(function(){t.updateLinksPosition()}),globalStreams.redoStackStream.onValue(function(){t.updateLinksPosition()}),globalStreams.shapeDragStream.onValue(function(e){"start"===e.type?t.hideSelectedComments(e.shape_ids):"end"===e.type&&t.updateLinksPosition()}),globalStreams.freehandStream.onValue(function(e){e?t.hideComments():t.updateLinksPosition()}),globalStreams.applyOperationsStream.onValue(function(e){globalStreams.isBoardLoaded()&&t.updateLinksPosition()}),t}},function(e,t,n){var r=n(70);"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n(23)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(22)(!1)).push([e.i,".link-shape-wrap {\n  pointer-events: auto;\n  position: absolute;\n  display: inline-block;\n  height: auto;\n  padding: 0;\n  font-size: 11px;\n}\n\n.link-shape {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  border-radius: 15px;\n  width: 30px;\n  height: 30px;\n  /* background-color: #fff; */\n  /* border: 1px solid #fff; */\n  z-index: 5;\n}\n\n.link-img-center {\n  position: relative;\n}",""])},,function(e,t,n){"use strict";n.p=_config.publicPath},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReactDynamic=void 0;var r,a=n(0),o=(r=a)&&r.__esModule?r:{default:r},i=n(57),u=n(13);t.ReactDynamic=function(e){return o.default.createElement(u.Provider,{store:e.store},o.default.createElement(i.TopLeftMenu,null))}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoardUsersAPI=void 0;var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(58),i=n(10);t.BoardUsersAPI=(r(u,null,[{key:"getAccountUsersForBoard",value:function(){return new Promise(function(t,n){o.API.whenReady(function(){globalStreams.boardLoadedWrapStream.onValue(function(){backend.accountUsersForBoard({boardId:(0,i.currentBoard)().boardId}).then(function(e){t(e)}).catch(function(e){console.error("BoardUsersAPI.getAccountUsersForBoard:",e),n(e)})})})})}},{key:"updateShowHidBoardUsers",value:function(e){return new Promise(function(t,n){"undefined"!=typeof backendAuthService&&e?backendAuthService.showBoardUsers().then(function(e){t(e)}).catch(function(e){console.error("BoardUsersAPI.showBoardUsers"),n(e)}):"undefined"==typeof backendAuthService||e||backendAuthService.hideBoardUsers().then(function(e){t(e)}).catch(function(e){console.error("BoardUsersAPI.hideBoardUsers"),n(e)})})}}]),u);function u(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.UserAPI=(r(o,null,[{key:"userMessageSeen",value:function(){return new Promise(function(e,t){"undefined"!=typeof backendAuthService&&backendAuthService.umDismissed().then(function(e){}).catch(function(e){console.error("UserAPI.userMessageSeen:",e)})})}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentStateComponent=void 0;var b=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},h=n(0),v=r(h),y=n(10),S=r(n(27)),E=n(13),U=n(5);function r(e){return e&&e.__esModule?e:{default:e}}t.DocumentStateComponent=function(e){var t=(0,h.useState)(!1),n=b(t,2),r=n[0],a=n[1],o=(0,h.useState)(!1),i=b(o,2),u=i[0],s=i[1],c=(0,h.useState)(!1),l=b(c,2),d=l[0],f=l[1],p=(0,E.useSelector)(function(e){return e[U.CURRENT_USER_NAMESPACE_KEY]}).currentUserState;if((0,h.useEffect)(function(){var t,n=!0,e=globalStreams.boardSaveStatusChangedStream.onValue(function(){n&&a(!0),t&&clearTimeout(t),n=!1;var e=gwtIsSaved();e&&s(!1),f(e),t=setTimeout(function(){s(!0)},5e3)});return function(){e(),clearTimeout(t)}},[]),!p.currentUser)return v.default.createElement(v.default.Fragment,null);if("function"!=typeof p.currentUser.isLoggedIn)return v.default.createElement(v.default.Fragment,null);var m={display:r?"inline-block":"none",top:p.currentUser.isLoggedIn()?"32px":"3px"},g=(0,S.default)({"saving-alert":u});return v.default.createElement("div",{className:"document-state",style:m},d&&v.default.createElement("span",{title:"All changes saved on server",ref:function(e){return(0,y.addTooltip)(e,{container:"body",placement:"bottom",title:"All changes saved on server"})}},"Board saved"),!d&&v.default.createElement("span",{className:g,ref:function(e){return(0,y.addTooltip)(e,{container:"body",placement:"bottom",title:"Saving changes to server"})}},"Saving..."))}},function(e,t,n){var r=n(81);"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n(23)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(22)(!1)).push([e.i,".teammates {\n  display: inline-block;\n  margin: -3px 0 0 -5px;\n}\n\n.teammates img {\n  display: inline-block;\n  border-radius: 50em;\n  margin-right: 3px;\n  border: 2px solid rgba(255, 255, 255, .5);\n}\n\n.teammates img.highlight {\n  /* // box-shadow: 0 0 2px 1px rgba(0,255,0,0.5), inset 0 0 1px 1px rgb(0,255,0) */\n  border: 2px solid rgb(0,255,0);\n}\n\n.add-teammate {\n  display: block;\n  margin: 0 3px 0 3px;\n  padding: 4px;\n  background-color: #fff;\n  border-radius: 50%;\n  min-width: 20px;\n  min-height: 20px;\n  position: relative;  \n  top: 2px;\n}\n\n.add-teammate i {\n  background-color: #fff;\n  position: relative;\n  left: 2px;\n  top: -1px;\n}\n\n.board-name .current-team.pure-button-white {\n  margin-left: 3px;\n}\n\n.board-name .current-team.pure-button-white div {\n  height: 100%;\n  background-color: #fff;\n  color: #276231;\n  border-radius: 2px;\n}\n\n.board-name .current-team.pure-button-white div .sprite-hamburger-menu {\n  margin: 0;\n}",""])},function(e,t,n){var r=n(83);"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n(23)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(22)(!1)).push([e.i,".sb-tooltip {\n  position: fixed;\n  z-index: 1030;\n  display: block;\n  visibility: visible;\n  font-size: 11px;\n  line-height: 1.4;\n  opacity: 0;\n  filter: alpha(opacity=0);\n}\n\n.sb-tooltip.in {\n  opacity: 0.8;\n  filter: alpha(opacity=80);\n}\n\n.sb-tooltip.top {\n  margin-top: -3px;\n  padding: 5px 0;\n}\n\n.sb-tooltip.right {\n  margin-left: 3px;\n  padding: 0 5px;\n}\n\n.sb-tooltip.bottom {\n  margin-top: 3px;\n  padding: 5px 0;\n}\n\n.sb-tooltip.left {\n  margin-left: -3px;\n  padding: 0 5px;\n}\n\n.sb-tooltip-inner {\n  max-width: 200px;\n  padding: 8px;\n  color: #ffffff;\n  text-align: center;\n  text-decoration: none;\n  background-color: #000000;\n  border-radius: 4px;\n}\n\n.sb-tooltip-arrow {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-color: transparent;\n  border-style: solid;\n}\n\n.sb-tooltip.top .sb-tooltip-arrow {\n  bottom: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-width: 5px 5px 0;\n  border-top-color: #000000;\n}\n\n.sb-tooltip.right .sb-tooltip-arrow {\n  top: 50%;\n  left: 0;\n  margin-top: -5px;\n  border-width: 5px 5px 5px 0;\n  border-right-color: #000000;\n}\n\n.sb-tooltip.left .sb-tooltip-arrow {\n  top: 50%;\n  right: 0;\n  margin-top: -5px;\n  border-width: 5px 0 5px 5px;\n  border-left-color: #000000;\n}\n\n.sb-tooltip.bottom .sb-tooltip-arrow {\n  top: 0;\n  left: 50%;\n  margin-left: -5px;\n  border-width: 0 5px 5px;\n  border-bottom-color: #000000;\n}\n\n.fade {\n  opacity: 0;\n  -webkit-transition: opacity .15s linear;\n  transition: opacity .15s linear;\n}\n\n.fade.in {\n  opacity: 1;\n}",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getReactApp=void 0;var r=n(0),a=s(r),o=n(13),i=n(46),u=s(n(86));function s(e){return e&&e.__esModule?e:{default:e}}function c(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.Suspense,{fallback:a.default.createElement("div",null)},a.default.createElement(b,null)))}function l(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.Suspense,{fallback:a.default.createElement("div",null)},a.default.createElement(h,null)))}function d(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.Suspense,{fallback:a.default.createElement("div",null)},a.default.createElement(v,null)))}function f(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.Suspense,{fallback:a.default.createElement("div",null)},a.default.createElement(y,null)))}function p(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.Suspense,{fallback:a.default.createElement("div",null)},a.default.createElement(S,null)))}function m(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.Suspense,{fallback:a.default.createElement("div",null)},a.default.createElement(E,null)))}function g(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(r.Suspense,{fallback:a.default.createElement("div",null)},a.default.createElement(U,null)))}var b=a.default.lazy(function(){return Promise.all([n.e(3),n.e(7)]).then(n.t.bind(null,101,7))}),h=a.default.lazy(function(){return n.e(9).then(n.t.bind(null,102,7))}),v=a.default.lazy(function(){return Promise.all([n.e(3),n.e(10)]).then(n.t.bind(null,103,7))}),y=a.default.lazy(function(){return Promise.all([n.e(2),n.e(5)]).then(n.t.bind(null,104,7))}),S=a.default.lazy(function(){return n.e(6).then(n.t.bind(null,105,7))}),E=a.default.lazy(function(){return Promise.all([n.e(2),n.e(4)]).then(n.t.bind(null,106,7))}),U=a.default.lazy(function(){return n.e(11).then(n.t.bind(null,107,7))}),_=(t.getReactApp=function(e){return location.pathname.startsWith("/service/tutorial")?a.default.createElement(w,{store:e}):a.default.createElement(_,{store:e})},function(e){return a.default.createElement(a.default.Fragment,null,a.default.createElement(o.Provider,{store:e.store},a.default.createElement(i.HashRouter,null,a.default.createElement(i.Route,{path:"/move",exact:!0,component:c}),a.default.createElement(i.Route,{path:"/publish",exact:!0,component:l}),a.default.createElement(i.Route,{path:"/menushare",exact:!0,component:d}),a.default.createElement(i.Route,{path:"/boards",exact:!0,component:f}),a.default.createElement(i.Route,{path:"/go/:to",exact:!0,component:p}),a.default.createElement(i.Route,{path:"/boardpassword",exact:!0,component:m}),a.default.createElement(i.Route,{path:"/info",exact:!0,component:u.default}))))}),w=function(e){return a.default.createElement(a.default.Fragment,null,a.default.createElement(o.Provider,{store:e.store},a.default.createElement(i.HashRouter,null,a.default.createElement(i.Route,{exact:!0,path:"/"},a.default.createElement(i.Redirect,{to:"essentials"})),a.default.createElement(i.Route,{path:"/essentials",exact:!0,component:g}))))}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e};function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,i=n(0),u=(o=i)&&o.__esModule?o:{default:o},s=n(13),c=n(46);n(87);var l=n(89),d=n(11),f=n(90);var p=(0,s.connect)(function(e,t){return{infoState:(0,f.getInfoState)(e)}})(function(t){var n=(0,s.useDispatch)();return t.infoState.text?((0,i.useEffect)(function(){if(!(t.infoState.timeout<=0)){var e=setTimeout(function(){n({type:d.InfoActionTypes.SetInfoText,payload:{text:null,timeout:0}})},t.infoState.timeout);return function(){clearTimeout(e)}}},[]),u.default.createElement("div",{className:"info-popup"},u.default.createElement("div",{className:"triangle"}),u.default.createElement("div",{className:"content"},t.infoState.text))):u.default.createElement(u.default.Fragment,null)}),m=(0,c.withRouter)(p),g=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(b,u.default.Component),r(b,[{key:"render",value:function(){return u.default.createElement(s.Provider,{store:(0,l.getStoreForInfo)()},u.default.createElement(m,null))}}]),b);function b(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}t.default=g},function(e,t,n){var r=n(88);"string"==typeof r&&(r=[[e.i,r,""]]);var a={transform:void 0};n(23)(r,a);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(22)(!1)).push([e.i,".info-popup {\n  position: fixed;\n  top: -10px;\n  left: 50%;\n  margin-left: -150px;\n  width: 300px;\n  z-index: 10;\n  text-align: center;\n}\n\n.info-popup .triangle {\n  border-style: dashed;\n  border-color: transparent;\n  border-width: 10px;\n  display: inline-block;\n  /* Use font-size to control the size of the arrow. */\n  font-size: 10px;\n  height: 0;\n  line-height: 0;\n  position: relative;\n  vertical-align: bottom;\n  bottom: 0;\n  width: 0;\n  /* text-align: center; */\n  left: 0;\n  border-bottom-width: 1em;\n  border-bottom-style: solid;\n  border-bottom-color: rgba(51, 51, 51, 0.9);\n}\n\n.info-popup .content {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  background-color: rgba(51, 51, 51, 0.9);\n  border-radius: 4px;\n  color: #fff;\n  min-height: 50px;\n  padding: 10px;\n}",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForInfo=void 0;var r=n(4);t.getStoreForInfo=_.once(function(){return(0,r.getStore)()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInfoState=function(e){return(0,a.getStateAtNamespaceKey)(e,r.INFO_NAMESPACE_KEY).infoState};var r=n(5),a=n(14)},function(e,t,n){"use strict";var r=n(4),a=n(9);n(92),n(93),globalStreams.reduxStream.onValue(function(e){var t=(0,r.getStore)().dispatch;switch(e.type){case"currentUser":e.payload.currentUser.userLastActivity=(new Date).getTime(),t({type:a.CurrentUserActionTypes.CurrentUserSave,payload:{currentUser:e.payload.currentUser}});break;case"currentBoard":t({type:a.CurrentUserActionTypes.CurrentBoardSave,payload:{currentBoard:e.payload.currentBoard}})}})},function(e,t,n){"use strict";var r=n(4),a=n(9);var o=_.throttle(function(){var e=(0,r.getStore)().dispatch,t=(new Date).getTime();e({type:a.CurrentUserActionTypes.CurrentUserUpdateUserActivity,payload:{userLastActivity:t}})},5e3);PointerEvent?(document.documentElement.addEventListener("pointermove",o),document.documentElement.addEventListener("pointerdown",o)):(document.documentElement.addEventListener("mousemove",o),document.documentElement.addEventListener("mousedown",o),document.documentElement.addEventListener("touchstart",o)),document.documentElement.onkeydown=o},function(e,t,n){"use strict";var r=n(4),a=n(9);n(48),window.ngBoardNameChanged=function(e){(0,(0,r.getStore)().dispatch)({type:a.CurrentUserActionTypes.CurrentBoardUpdateBoardName,payload:{boardName:e}})}}],[[62,0,1]]]);